<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OS - CNT Assistência</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Times New Roman', Times, serif;
      padding: 20px;
    }

    .linha {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 8px;
    }

    .col {
      flex: 1;
      min-width: 150px;
    }

    label {
      display: block;
      margin-bottom: 3px;
      font-weight: bold;
    }

    input[type="text"], textarea, select {
      width: 100%;
      padding: 5px;
      background-color: #111;
      color: #fff;
      border: 1px solid #555;
    }

    .checkbox-group {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .print-btn {
      background-color: #333;
      color: #fff;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      margin-top: 20px;
    }

    @media print {
      body {
        background: #fff !important;
        color: #000 !important;
        font-size: 14px !important;
        padding: 15px !important;
      }

      .print-btn, button {
        display: none !important;
      }

      input, textarea, select {
        border: 1px solid #000 !important;
        background: transparent !important;
        color: #000 !important;
        padding: 2px !important;
      }

      .linha-impressao {
        display: flex !important;
        gap: 20px !important;
        margin: 10px 0 !important;
      }

      .via-cliente {
        display: block !important;
        page-break-before: always;
        margin-top: 30px;
      }

      .hidden {
        display: block !important;
      }

      .termos-condicoes {
        page-break-inside: avoid;
      }
    }

    .titulo {
      text-align: center;
      margin-bottom: 20px;
    }

    .contato {
      text-align: center;
      font-size: 18px;
      margin-top: 5px;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body onload="inicializarOS()">

  <div class="titulo">
    <h1>CNT ASSISTÊNCIA TÉCNICA</h1>
    <div class="contato">Contato: 84 99809-6865</div>
  </div>

  <h2 style="text-align: center;">ORDEM DE SERVIÇO</h2>

  <!-- FORMULÁRIO PRINCIPAL -->
  <div class="linha">
    <div class="col">
      <label>OS Nº</label>
      <span id="osNumber"></span>
    </div>
  </div>

  <div class="linha">
    <div class="col">
      <label>NOME DO CLIENTE</label>
      <input type="text" id="nomeCliente">
    </div>
  </div>

  <div class="linha">
    <div class="col">
      <label>TELEFONE</label>
      <input type="text" id="telefone">
    </div>
    <div class="col">
      <label>TÉCNICO</label>
      <select id="tecnico">
        <option>João Paulo</option>
        <option>Bruno</option>
      </select>
    </div>
  </div>

  <div class="linha">
    <div class="col">
      <label>EQUIPAMENTO</label>
      <input type="text" id="equipamento">
    </div>
  </div>

  <div class="linha">
    <div class="col">
      <label>ACESSÓRIO</label>
      <div class="checkbox-group">
        <label><input type="radio" name="acessorio" value="sim"> SIM</label>
        <label><input type="radio" name="acessorio" value="nao"> NÃO</label>
      </div>
    </div>
    <div class="col">
      <label>LIGA</label>
      <div class="checkbox-group">
        <label><input type="radio" name="liga" value="sim"> SIM</label>
        <label><input type="radio" name="liga" value="nao"> NÃO</label>
      </div>
    </div>
    <div class="col">
      <label>DEFEITO FÍSICO</label>
      <div class="checkbox-group">
        <label><input type="radio" name="defeito" value="sim"> SIM</label>
        <label><input type="radio" name="defeito" value="nao"> NÃO</label>
      </div>
    </div>
  </div>

  <div class="linha hidden" id="campoAcessorio">
    <div class="col">
      <label>QUAL ACESSÓRIO</label>
      <input type="text" id="qualAcessorio">
    </div>
  </div>

  <div class="linha hidden" id="campoDefeito">
    <div class="col">
      <label>QUAL DEFEITO</label>
      <input type="text" id="qualDefeito">
    </div>
  </div>

  <div class="linha">
    <div class="col">
      <label>DEFEITO RELATADO</label>
      <textarea id="defeitoRelatado" rows="3"></textarea>
    </div>
  </div>

  <div class="linha linha-impressao">
    <div class="col">
      <label>ENTRADA</label>
      <span id="dataEntrada"></span>
    </div>
    <div class="col">
      <label>SAÍDA</label>
      <input type="text" id="dataSaida">
    </div>
  </div>

  <div class="linha linha-impressao">
    <div class="col">
      <label>ASS. ENTREGA</label>
      <input type="text" id="assinaturaEntrega">
    </div>
    <div class="col">
      <label>ASS. RETIRADA</label>
      <input type="text" id="assinaturaRetirada">
    </div>
  </div>

  <button class="print-btn" onclick="salvarImprimir()">Salvar e Imprimir</button>

  <!-- TERMOS ORIGINAIS -->
  <div class="termos-condicoes">
    <h3>Termos e Condições</h3>
    <ol>
      <li>
        <strong>Recebimento do Equipamento</strong>
        <p>o O equipamento entregue será avaliado, registrando estado físico, avarias e acessórios recebidos. Não nos responsabilizamos por itens não declarados.</p>
      </li>
      <li>
        <strong>Diagnóstico e Orçamento</strong>
        <p>o O diagnóstico será realizado em até 3 dias úteis. O serviço só será iniciado após aprovação do orçamento pelo cliente.</p>
      </li>
      <li>
        <strong>Garantia</strong>
        <p>o Garantia de <span style="border-bottom: 1px solid; display: inline-block; width: 80px;"></span> dias para o serviço realizado, limitada ao reparo efetuado. Não cobre mau uso, quedas, líquidos ou intervenções de terceiros.</p>
      </li>
      <li>
        <strong>Equipamentos Não Retirados</strong>
        <p>o Após 30 dias da conclusão, será cobrada taxa de armazenamento de R$ 1,00/dia. Após 90 dias, o equipamento será considerado abandonado, conforme o Código Civil Artigo 1.275, inciso III.</p>
      </li>
      <li>
        <strong>Perda de Dados</strong>
        <p>o Não nos responsabilizamos por perda de dados. Recomenda-se backup antes da entrega. Backup solicitado será cobrado à parte.</p>
      </li>
      <li>
        <strong>Peças Substituídas</strong>
        <p>o Garantia de 90 dias para peças substituídas contra defeitos de fabricação. Peças originais mediante solicitação e disponibilidade.</p>
      </li>
    </ol>
    <p style="margin-top: 20px; border-top: 1px solid; padding-top: 10px;">
      Assinatura do Cliente: <span style="border-bottom: 1px solid; width: 300px; display: inline-block;"></span>
    </p>
  </div>

  <!-- VIA DO CLIENTE -->
  <div class="via-cliente hidden">
    <div class="titulo">
      <h1>CNT ASSISTÊNCIA TÉCNICA</h1>
      <div class="contato">Contato: 84 99809-6865</div>
    </div>
    
    <h2 style="text-align: center; margin: 15px 0;">VIA DO CLIENTE</h2>

    <div class="linha linha-impressao">
      <div class="col">
        <label>OS Nº</label>
        <span id="osPrint"></span>
      </div>
      <div class="col">
        <label>DATA ENTREGA</label>
        <span id="dataEntradaPrint"></span>
      </div>
      <div class="col">
        <label>DATA RETIRADA</label>
        <span id="dataSaidaPrint"></span>
      </div>
    </div>

    <div class="linha linha-impressao">
      <div class="col">
        <label>CLIENTE</label>
        <span id="clientePrint"></span>
      </div>
      <div class="col">
        <label>EQUIPAMENTO</label>
        <span id="equipamentoPrint"></span>
      </div>
    </div>

    <div class="linha linha-impressao">
      <div class="col">
        <label>ACESSÓRIO</label>
        <span id="acessorioPrint"></span>
      </div>
      <div class="col">
        <label>LIGA</label>
        <span id="ligaPrint"></span>
      </div>
      <div class="col">
        <label>DEFEITO FÍSICO</label>
        <span id="defeitoPrint"></span>
      </div>
    </div>

    <div class="linha">
      <div class="col">
        <label>DEFEITO RELATADO</label>
        <span id="defeitoRelatadoPrint"></span>
      </div>
    </div>

    <div class="linha linha-impressao">
      <div class="col">
        <label>ASS. ENTREGA</label>
        <span id="assEntPrint"></span>
      </div>
      <div class="col">
        <label>ASS. RETIRADA</label>
        <span id="assRetPrint"></span>
      </div>
    </div>

    <!-- TERMOS NA VIA DO CLIENTE -->
    <div class="termos-condicoes">
      <h3>Termos e Condições</h3>
      <!-- Mesmo conteúdo dos termos aqui -->
    </div>
  </div>

  <script>
    function inicializarOS() {
      let numeroOS = localStorage.getItem('osCount') || 1;
      document.getElementById('osNumber').textContent = numeroOS;
      
      const hoje = new Date();
      document.getElementById('dataEntrada').textContent = hoje.toLocaleDateString('pt-BR');

      // Configurar radios
      configurarRadios('acessorio', 'campoAcessorio');
      configurarRadios('defeito', 'campoDefeito');
    }

    function configurarRadios(nomeGrupo, idCampo) {
      document.querySelectorAll(`input[name="${nomeGrupo}"]`).forEach(radio => {
        radio.addEventListener('change', () => {
          const campo = document.getElementById(idCampo);
          campo.classList.toggle('hidden', radio.value !== 'sim');
          if(radio.value !== 'sim') campo.querySelector('input').value = '';
        });
      });
    }

    function salvarImprimir() {
      // Coletar dados
      const dados = {
        os: document.getElementById('osNumber').textContent,
        nome: document.getElementById('nomeCliente').value,
        telefone: document.getElementById('telefone').value,
        tecnico: document.getElementById('tecnico').value,
        equipamento: document.getElementById('equipamento').value,
        acessorio: document.querySelector('input[name="acessorio"]:checked')?.value || 'NÃO',
        liga: document.querySelector('input[name="liga"]:checked')?.value || 'NÃO',
        defeito: document.querySelector('input[name="defeito"]:checked')?.value || 'NÃO',
        qualAcessorio: document.getElementById('qualAcessorio').value,
        qualDefeito: document.getElementById('qualDefeito').value,
        defeitoRelatado: document.getElementById('defeitoRelatado').value,
        dataEntrada: document.getElementById('dataEntrada').textContent,
        dataSaida: document.getElementById('dataSaida').value,
        assEnt: document.getElementById('assinaturaEntrega').value,
        assRet: document.getElementById('assinaturaRetirada').value
      };

      // Preencher via do cliente
      document.getElementById('osPrint').textContent = dados.os;
      document.getElementById('clientePrint').textContent = dados.nome;
      document.getElementById('telefonePrint').textContent = dados.telefone;
      document.getElementById('equipamentoPrint').textContent = dados.equipamento;
      document.getElementById('acessorioPrint').textContent = dados.acessorio;
      document.getElementById('ligaPrint').textContent = dados.liga;
      document.getElementById('defeitoPrint').textContent = dados.defeito;
      document.getElementById('defeitoRelatadoPrint').textContent = dados.defeitoRelatado;
      document.getElementById('dataEntradaPrint').textContent = dados.dataEntrada;
      document.getElementById('dataSaidaPrint').textContent = dados.dataSaida;
      document.getElementById('assEntPrint').textContent = dados.assEnt;
      document.getElementById('assRetPrint').textContent = dados.assRet;

      // Salvar e imprimir
      localStorage.setItem('osCount', parseInt(dados.os) + 1);
      window.print();
    }
  </script>

</body>
</html>
